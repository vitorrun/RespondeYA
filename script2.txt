function sendMessage() {
  const input = document.getElementById("user-input");
  const message = input.value.trim();
  if (!message) return;

  appendMessage(message, "user");
  respondToMessage(message.toLowerCase());
  input.value = "";
}

function appendMessage(message, sender) {
  const chatBox = document.getElementById("chat-box");
  const messageElement = document.createElement("div");
  messageElement.className = sender === "user" ? "user-message" : "bot-message";
  messageElement.innerText = (sender === "user" ? "ğŸ‘¤ TÃº: " : "ğŸ¤– ") + message;
  chatBox.appendChild(messageElement);
  chatBox.scrollTop = chatBox.scrollHeight;
}

function respondToMessage(message) {
  let response = "";

  // NormalizaciÃ³n bÃ¡sica
  const normalized = message.normalize("NFD").replace(/[\u0300-\u036f]/g, "");

  // Saludos
  if (/(buen[oa]s?\s?(d[iÃ­]as|tardes|noches)|hola)/.test(normalized)) {
    response = "Â¡Hola! Â¿QuÃ© deseas consultar hoy?";
  }

  // Planes de telefonÃ­a
  else if (normalized.includes("plan") && normalized.includes("telefonia")) {
    response = "ğŸ“± Planes de telefonÃ­a disponibles:\n- 6GB por 60.000 Gs\n- 9GB por 90.000 Gs\n- 15GB por 150.000 Gs\n- 50GB por 300.000 Gs.";
  }

  // Detalles especÃ­ficos de planes
  else if (normalized.includes("que incluye el plan de 6")) {
    response = "ğŸ“± El plan de 6GB incluye:\n- Llamadas y mensajes ilimitados\n- Roaming a Argentina, Chile y Uruguay\n- 10.000 Gs de saldo\n- WhatsApp gratis";
  } else if (normalized.includes("que incluye el plan de 15")) {
    response = "ğŸ“± El plan de 15GB incluye:\n- Llamadas y mensajes ilimitados\n- Roaming mundial\n- 10.000 Gs de saldo\n- WhatsApp gratis";
  }

  // Planes de Internet
  else if (normalized.includes("plan") && normalized.includes("internet")) {
    response = "ğŸŒ Planes de Internet:\n- 50Mbps por 150.000 Gs\n- 100Mbps por 250.000 Gs\n- 300Mbps por 400.000 Gs\nTodos incluyen modem Wi-Fi gratis, soporte 24/7 y sin costo de instalaciÃ³n.";
  }

  // ContrataciÃ³n de servicios
  else if (
    normalized.includes("quiero adquirir") ||
    normalized.includes("quiero contratar") ||
    normalized.includes("como contratar")
  ) {
    response = "Te paso con nuestro equipo de ventas. Un momento...";
  }

  // Modelos de celulares
  else if (normalized.includes("telefonos") || normalized.includes("celulares") || normalized.includes("smartphones")) {
    response = "ğŸ“± Modelos disponibles:\n" +
      "1. Samsung Galaxy A14 - 1.000.000 Gs\n" +
      "2. Xiaomi Redmi Note 11 - 1.200.000 Gs\n" +
      "3. iPhone 11 - 3.000.000 Gs\n" +
      "4. Moto G22 - 950.000 Gs\n" +
      "5. Samsung Galaxy S22 - 4.500.000 Gs\n" +
      "6. Xiaomi Poco X5 - 1.600.000 Gs\n" +
      "7. iPhone SE - 2.300.000 Gs\n" +
      "8. Realme 10 - 1.400.000 Gs\n" +
      "9. Huawei Nova Y70 - 1.000.000 Gs\n" +
      "10. ZTE Blade V40 - 850.000 Gs";
  }

  // Preguntas frecuentes
  else if (normalized.includes("preguntas frecuentes") || normalized.includes("dudas frecuentes")) {
    response = "â“ Dudas frecuentes:\n" +
      "- Â¿CÃ³mo contratar un plan?\n" +
      "- Â¿QuÃ© incluye cada plan?\n" +
      "- Â¿QuÃ© modelos de celulares tienen?\n" +
      "- Â¿Hay promociones activas?\n" +
      "- Â¿El roaming estÃ¡ incluido?\n" +
      "- Â¿QuÃ© velocidad tiene el internet?\n" +
      "- Â¿CuÃ¡nto tarda la instalaciÃ³n?\n" +
      "- Â¿Puedo cambiar de plan luego?\n" +
      "- Â¿Los planes tienen permanencia?\n" +
      "- Â¿Hay soporte tÃ©cnico 24/7?";
  }

  // Respuesta por defecto
  else {
    response = "ğŸ¤– No entendÃ­ tu mensaje. PodÃ©s consultar sobre: planes de telefonÃ­a, internet, TV, smartphones, o cÃ³mo contratar.";
  }

  appendMessage(response, "bot");
}
